!function(t){t.fn.tSelect=function(s){t("html").addClass("has-ts-select");var a={placeholder:"Select",filter:!1,filterPlaceholder:"Filter…",filterNoMatches:"No matches…",customScroll:!1,dataAttr:"value",dom:{wrapperClass:"ts-wrap",triggerClass:"ts-trigger",optionsWrapClass:"ts-options-wrap",optionClass:"ts-option",activeOptionClass:"ts-active"},onOptionSelect:function(){},onActive:function(){}};return this.each(function(){var e=t.extend(a,s),l=t(this),r=l.find("option"),o=l.attr("data-placeholder")?l.attr("data-placeholder"):e.placeholder,i=t('<div class="'+e.dom.wrapperClass+(l.is(":disabled")?" ts-disabled":"")+'"></div>'),n=t('<a href="#" class="'+e.dom.triggerClass+'">'+o+"</a>"),p=t('<span class="ts-filter"><input type="text" placeholder="'+e.filterPlaceholder+'" /></span>'),c=t('<div class="'+e.dom.optionsWrapClass+'"><div class="ts-scroll"></div></div>'),d=l.attr("data-val")?l.attr("data-val"):e.dataAttr;if(t(this).data("ts-options",e),t(this).init.prototype.reload=function(){t(this).next(".ts-wrap").remove(),t(this).tSelect(t(this).data("ts-options"))},!(t(this).next(".ts-wrap").length>0)){l.hide(),i.insertAfter(l),n.appendTo(i),c.appendTo(i),r.each(function(){val=t(this).attr(d),optGroup=t(this).parents("optgroup"),html=t(this).html(),opt=t("<a />",{class:t(this).attr("selected")?e.dom.activeOptionClass:"",href:"#","data-val":val,html:html}),t(this).attr("selected")&&n.text(t(this).text()).attr("data-val",t(this).val()),""!=val&&(optGroup.length>0?(currGroup=t(".ts-group-"+optGroup.index()),currGroup.length<1&&t('<span class="ts-optgroup ts-group-'+optGroup.index()+'"><span class="ts-group-title">'+optGroup.attr("label")+"</span></span>").appendTo(c),opt.appendTo(currGroup)):opt.appendTo(c.find(".ts-scroll")))}),1==e.filter&&(p.prependTo(c),t('<span class="ts-error">'+e.filterNoMatches+"</span>").insertAfter(p)),1==e.customScroll&&(t.mCustomScrollbar?c.find(".ts-scroll").mCustomScrollbar():(t("<link/>",{rel:"stylesheet",type:"text/css",href:"https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.css"}).appendTo("head"),t.getScript("https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.js",function(t){c.find(".ts-scroll").mCustomScrollbar()}))),n.on("click",function(s){_self=t(this),_elWrap=_self.parents(".ts-wrap"),_optionsWrap=_self.siblings("."+e.dom.optionsWrapClass),s.preventDefault(),_elWrap.hasClass("ts-active")?(_optionsWrap.hide(),_elWrap.removeClass("ts-active")):(_optionsWrap.show(),_elWrap.addClass("ts-active"),t(".ts-wrap").not(_elWrap).each(function(){t(this).removeClass("ts-active"),t(this).find(".ts-options-wrap").hide()})),1==e.filter&&p.find("input").trigger("focus"),e.onActive()}),c.find("a").on("click",function(s){_self=t(this),_elWrap=_self.parents(".ts-wrap"),_val=_self.attr("data-val"),s.preventDefault(),c.find("a.ts-active").removeClass("ts-active"),_self.addClass("ts-active"),l.val(_val).trigger("change"),_elWrap.removeClass("ts-active"),n.text(_self.html()).attr("data-val",_self.attr("data-val")),c.hide(),e.onOptionSelect()}),t("html, body").on("click",function(s){target=t(s.target),target.parents(".ts-wrap").length<1&&t(".ts-wrap.ts-active").length>0&&(t(".ts-options-wrap").hide(),t(".ts-wrap").removeClass("ts-active"))}),1==e.filter&&p.find("input").on("keyup",function(s){var a=t(this).val(),e=t(this).parents(".ts-wrap");a=a.toLowerCase().replace(/\b[a-z]/g,function(t){return t.toUpperCase()}),matches=e.find(".ts-scroll a:contains("+a+")"),nonmatches=e.find(".ts-scroll a:not(:contains("+a+"))"),""==a?e.find(".ts-scroll a.ts-unmatched").removeClass("ts-unmatched"):(nonmatches.addClass("ts-unmatched"),matches.length<1?c.addClass("ts-no-matches"):(c.removeClass("ts-no-matches"),matches.removeClass("ts-unmatched")))})}})}}(jQuery);
